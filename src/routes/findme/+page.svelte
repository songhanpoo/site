<script lang="ts">
	import Metadata from '$lib/components/metadata.svelte';
	import { onMount } from 'svelte';

	let map;
	const MAPBOX_ACCESS_TOKEN = 'pk.eyJ1Ijoic29uZ2hhbnBvbyIsImEiOiJjbWdiMHdjZ3MwN29nMmxxNGp4Y25iNTBiIn0.xvs5O3qOH1Verhe1A8vqyQ';

	onMount(async () => {
	// Coordinates for Ho Chi Minh City
	const hcmcCoords = [106.6297, 10.8231];
		const mapboxgl = await import('mapbox-gl');
		mapboxgl.default.accessToken = MAPBOX_ACCESS_TOKEN;

		map = new mapboxgl.default.Map({
			container: 'map',
			style: 'mapbox://styles/mapbox/streets-v12',
			center: [106.6297, 10.8231], // Ho Chi Minh City coordinates
			zoom: 3.5
		});

		// Get today's date and 7 days ago in ISO format
		const today = new Date();
		const priorDate = new Date();
		priorDate.setDate(today.getDate() - 7);
		const sevenDaysAgo = priorDate.toISOString();

		const magDisplay = document.getElementById('mag');
		const locDisplay = document.getElementById('loc');
		const dateDisplay = document.getElementById('date');

		map.on('load', () => {
		// Add a custom marker for developer in Ho Chi Minh City
		const devMarker = document.createElement('div');
		devMarker.style.display = 'flex';
		devMarker.style.alignItems = 'center';
		devMarker.style.background = 'rgba(255,255,255,0.95)';
		devMarker.style.borderRadius = '8px';
		devMarker.style.boxShadow = '0 2px 8px rgba(0,0,0,0.12)';
		devMarker.style.padding = '6px';
		devMarker.style.fontSize = '1rem';
		devMarker.style.fontWeight = '500';
		devMarker.style.gap = '8px';
		devMarker.innerHTML = `
		<div id="avatar-canvas-container" class="absolute -ml-12 w-10 h-10 overflow-hidden bg-indigo-300 rounded-2xl">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 306 306" fill="none" style="z-index: 2; position: absolute; pointer-events: none;"><path fill="#fff" d="M236.1 278.4c-.7.5-1.5 1-2.2 1.5-.8.5-1.5 1-2.3 1.4-.7.4-1.3.8-2 1.2-.1.1-.2.1-.3.2-2.3 1.4-4.7 2.7-7.1 3.9-.7.4-1.5.8-2.2 1.1 0 0-.1.1-.2.1l-2.4 1.2c-1.6.8-3.3 1.5-4.9 2.2-.8.4-1.7.7-2.5 1-.8.3-1.7.7-2.5 1-.8.3-1.7.7-2.5 1h-.1c-.8.3-1.7.6-2.5.9-1.8.6-3.7 1.2-5.5 1.8-.6.2-1.3.4-1.9.6-1.9.6-3.8 1.1-5.7 1.5-.7.2-1.4.3-2.2.5-1.8.4-3.7.8-5.5 1.2-.4.1-.7.1-1.1.2-.6.1-1.3.2-1.9.3-.9.1-1.7.3-2.6.4-.4.1-.8.1-1.2.2-.5.1-1.1.2-1.7.2-1.6.2-3.3.4-4.9.6-.5.1-1.1.1-1.6.2h-.1c-.7.1-1.4.1-2.1.2-.7.1-1.4.1-2.1.1-.4 0-.9.1-1.3.1-.8 0-1.5.1-2.2.1-1 0-1.9.1-2.9.1h-5c-42.2-.6-80.1-18.5-107.2-46.9 0 0 0-.1-.1-.1-3-2.7-.4-17.1 11.7-26.2 15.2-11.5 51.6-18.7 51.6-18.7s14.1-2.3 66.4 8.6c30.6 6.4 53.9 15.7 66.9 40.9 2.7 5.2 5.4 13.2-4.1 17.4Z"></path><path fill="#000" d="M173.6 219c19.2 3.9 39.7 8.1 55.5 20.8 5.3 4.3 8.8 10.6 11.7 16.7 1.4 3 2.8 6.1 3.9 9.4.6 2.2 1.5 4.7 1 7.3-.1.7-.7 1.6-1.2 2.1-2.3 2.3-4.8 3.7-7.3 5.5-14.7 10.2-31.6 17.4-49.1 21.2-39 8.5-81.2 1.9-115.5-18.6-11.4-6.9-21.9-15.3-30.9-25.2-1-1.2-1-3.2-1-4.5.1-3 .9-5.9 1.9-8.6 2.4-6.2 5.5-12.4 10.8-16.7 3.8-2.6 7.9-4.8 12.1-6.6 13.2-5.6 27.1-9.5 41.4-11.1 1.2-.1 1.4 1.6.2 1.8-13.7 2.8-27.3 7-40 12.7-4.6 2.3-9.5 4.3-13.2 7.9-3.5 3.8-6 8.5-8 13.3-1.3 2.9-2.2 7.5-1.8 9.8 6.3 7.5 13.7 14.1 21.7 19.8 43.8 30.6 110.3 32.6 156.9 7.1 4.2-2.3 8.3-4.9 12.2-7.6 1.9-1.3 3.9-2.4 5.4-3.9.1-.1 0 0 0 .1s-.1.2-.1.2c.1-1.2-.3-2.8-.8-4.4-1.8-5.8-4.7-11.9-7.8-17.2-4.9-7.9-13.2-12.9-21.6-16.9-5.8-2.7-11.9-4.8-18.1-6.8-6.2-2-12.5-3.7-18.8-5.2-1.6-.4-1.1-2.7.5-2.4Z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 306 306" fill="none" style="z-index: 5; position: absolute; pointer-events: none;"><path fill="#000" d="M227.2 91.1c6.8-5.9 16.8-14.8 6.5-27.2-10.3-12.4-29.3-7.6-29.3-7.6s4-11.4-7.1-15.5c-13.4-4.9-51.4 9.9-51.4 9.9-2.8-.1-5.5-.2-8-.2-32.8-.7-42.3 20-42.7 38.6 0 0-11.1 3.7-13.9 21.4-.9 5.7-1.8 13 .4 21.8 5.9 24 21.8 40.7 31.9 49.2 3.8-2.8-2.9-6.7-2.4-11.3-21.7-10.6-17-36.3-5.4-37.8 8.9-1.1 13.6 4.1 15.8 8.3.9 1.2-11.1-65.7 58.1-43.8 13.7 4.3 27.8 8.1 37.4 1.2 1.1 2.1 1.8 4.6 2 8.3 0 0 16.7-6.5 14.2-13.3-.8-2.3-6.1-2-6.1-2Z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 306 306" fill="none" style="z-index: 6; position: absolute; pointer-events: none;"><path fill="#000" d="M158.8 145.2c-2.4-.1-4.2-2.1-4-4.5l.1-2.8c.1-2.4 2.1-4.2 4.5-4 2.4.1 4.2 2.1 4 4.5l-.1 2.8c-.1 2.3-2.1 4.1-4.5 4ZM200.9 146.7c-2.2-.1-3.9-2-3.8-4.2l.1-2.6c.1-2.2 2-3.9 4.2-3.8 2.2.1 3.9 2 3.8 4.2l-.1 2.6c-.1 2.2-2 3.9-4.2 3.8Z"></path><path fill="#000" d="M167.8 139.8c-3.3-2.2-6.9-3.7-10.9-2.9-1.3.2-2.6.6-3.4 1.5-.3.4-1 .3-1-.3.1-2 1.8-3.3 3.4-4.1 3.1-1.6 7.4-1.3 10.2.8 1 .6 4.4 4.3 2.6 5.1-.4.2-.6.1-.9-.1ZM196.4 140.3c0-4.2 5.2-5.7 8.4-4.2 1.8.8 3.1 2.4 3.6 4.3.2.6-.7 1.1-1.1.6-1.7-2-4.6-3-6.9-1.8-.7.4-.8.7-1 1.1 0 2-2.9 1.9-3 0ZM172.6 123.3c2.1.7 4.2-1.2 3.8-3.5-.2-1.2-.7-2.4-1.7-3.3-3-2.7-15.4-5.1-22.9-1.6-6.6 3.2 11.2 5.2 20.8 8.4ZM202.501 124.9c-1.7.6-3.5-1.2-3.2-3.3.1-1.1.5-2.2 1.3-3 2.4-2.4 10.6-4.3 15.8-.6 4.5 3.1-6.1 4-13.9 6.9Z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 306 306" fill="none" style="z-index: 7; position: absolute; pointer-events: none;"><path fill="#000" d="M186.2 179c.1 1.6-1.1 4.4-3.3 6.4-11.3-6.9-16.4-3.3-16.4-3.3-4-6.1-3.1-14.4 6.6-8.1 6.7 4.4 10.9 5.1 13.1 5Z"></path><path fill="#fff" d="M182.799 185.5c-2.4 2.1-6 3.4-10.9 1.4-2.3-.9-4.1-2.7-5.5-4.7.1 0 5.1-3.6 16.4 3.3Z"></path><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3" d="M188.1 178.7s-4.2 2.3-15-4.6c-12.9-8.3-10.3 9.1-1.2 12.8 9.5 3.9 14.4-4.6 14.3-7.8"></path><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3" d="M166.5 182.2s5.1-3.6 16.4 3.3"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 306 306" fill="none" style="z-index: 4; position: absolute; pointer-events: none;"><path fill="#fff" d="M183 245.6c-2.1 10.3-15.7 16.5-38.6 7.2-23.8-9.6-34.1-32.5-36.7-39.3 14.1-26.4 4.3-44.7 4.3-44.7 32.5-2.8 60.9 35.2 60.9 35.2l4.4 18.8c.4 1.6 1.2 3 2.4 4 2.1 3.7 4.6 12.2 3.3 18.8Z"></path><path fill="#000" d="M107.2 213.8c1.9-2.9 3.1-6.3 3.9-9.6 1.5-6.9 2-13.9 2.1-20.9v-2.6c-.3-2.6-1.2-5.3-2.2-7.7-1.3-3.2 3.4-5.2 4.9-2 .2.4.2 1.1.2 1.5.3 13.6.9 31.1-7.7 42.4-.6.6-1.8-.3-1.2-1.1ZM174 203.8c1.5.9 2 2.1 2.2 3.3.6 2.4.4 5 1 7.5.5 2.4 2 4.7 2.4 7.2.5 2.6 2 8.1 2.6 10.8.2.6-.2 1.3-.9 1.4-.4.1-.7 0-1-.2-1.3-1.1-1.9-2.2-2.7-3.6-1.3-2.4-2.2-4.6-3-7.3-.7-2.4-.4-5-1-7.5-.5-2.4-1.9-4.7-2.4-7.2-.3-1.2-.4-2.5.5-4 .6-.6 1.6-.8 2.3-.4Z"></path><path fill="#000" d="M181.2 230.2c-19.1-1-34.7-7-49.9-34.1 12.8 11.3 27.9 15.6 43.8 17.6l2.1 9.2c.4 1.6 2.8 6.3 4 7.3Z"></path><path fill="#000" d="M180.401 226.5c3.4 6.4 5.4 14.4 3.3 21.5-1.6 5-6.2 8.7-11.2 10.1-11.6 3.1-25-1.8-35.3-7.3-12.7-7.1-22.1-19-28.1-32-.4-1 1-1.8 1.6-.8 2.1 4.2 4.5 8.3 7.2 12 2.7 3.8 5.8 7.3 9.3 10.4 10.2 9.2 24 14.9 37.8 14.9 14.2-.4 19.6-7.9 16.3-21.7-.5-2.2-1.3-4.5-2.4-6.4-.6-.8.9-1.7 1.5-.7Z"></path><path fill="#fff" d="M219.101 106.4c1.8 8.4-1.7 12.2-1.7 34.7 0 11.3 1 18.5-2.3 32.2-1.5 6.3-6.2 14-9.4 19.8-3.2 5.8-1.1 15.5-6.5 20-16.2 13.5-35.8 9.7-53.6-1.7-.7-.4-4.6-5-5.8-5.9-4.1-3.1-10.9-6.4-12.9-8.4-5.6-5.5-1.4-15.2-4.8-20.9-4.4-7.3-9.7-1.4-15.4-7.7-7.9-8.6-17.4-25.9-12.7-56.5 7.6-49.6 46.9-55.4 76-49.9 29.3 5.6 44.3 22.2 49.1 44.3Z"></path><path fill="#000" d="M111.7 177.4c-2.3-3.8-5.2-7.1-7.9-10.7-4-5.5-7-11.6-9-18-8.6-27.5-3.9-63.3 21.7-80.3 23.4-15.8 68.9-10.8 89.2 8.7 9 8.1 17.7 25 15.8 37.2-1.7 8.7-3.2 17.3-2.9 26.2 0 4.4.5 8.8.5 13.3.3 9-1.3 18.1-4.7 26.5-1.7 4.2-3.8 8.2-6.1 12.1-.4.6-.7 1.5-.9 2.6-.8 3.2-1.2 6.4-1.9 9.7-.8 3.5-1.7 7.5-4.7 10.1-8.3 6.7-19.4 8.7-29.7 7.9-7.2-.6-14.2-2.5-20.7-5.6-5.7-3.4-9.5-8.9-14.3-13.3-.5-.5.1-1.3.7-1 3.5 1.9 7.7 5.3 10.9 7.8 3.5 2.9 7.1 4.1 11.2 5.3 4.1 1.2 8.3 2.1 12.5 2.4 9.3.7 19.3-1 26.8-6.8 2-1.9 2.7-4.9 3.4-7.7.9-3.8 1.4-7.8 2.7-11.5.2-.6.6-1.4.9-1.8 2.4-3.6 4.6-7.4 6.4-11.3 3.7-7.9 5.6-16.5 5.6-25.2 0-4.4-.4-8.8-.5-13.2-.1-6.7-.2-13.4.4-20.1.3-3.3.8-6.4.7-9.6-1.3-11.4-6.7-22.6-14.7-30.8-17.3-17.6-50.1-22.6-72.8-14.2-26.8 10-33.8 37.1-35.3 63-1 15.5 3.7 30.7 15.4 41.4l4.7 4.9c1.6 1.8-1.8 4.4-3.4 2Z"></path><path fill="#fff" d="M123.5 145.6s-3.1-15-17.7-13.2c-12.6 1.6-17 31.8 11.6 40.2"></path><path fill="#000" d="M116.1 159.5c-2.3-1.3-3.9-3.5-4-6.2.1-2 .4-4.3-.1-6.3-.3-1.9-2.3-2.4-3.8-2.3-1.6.3-2.6 2.3-2.9 3.9 0 .1-.1.4-.1.5-.1.5-.9.5-1.1 0-1.3-3.9 1.6-8.2 5.8-7.7 5.9.4 6.7 6.6 5.6 11.3-.6 2 .2 3.8 1.3 5.5l.2.3c.5.6-.3 1.4-.9 1ZM196.101 135c1.5 7.1 4.3 13.7 7.8 19.9 3.1 7.6-4.9 14.8-12 14.5-.8 0-.9-1.1-.2-1.3 4.5-1.4 8.6-4.4 9.3-9 .3-1.4-.1-2.6-.8-3.8-3.3-6.2-5.3-13.3-4.8-20.3 0-.5.7-.5.7 0Z"></path><path fill="#000" d="M123 145.7c-2.3-5.9-7.3-11.5-14-11.4-.6-.1-1.6.1-2.2.1-1.7.1-3.1.7-4.4 1.9-6.4 6.4-5.3 17.7-.1 24.8 1.8 2.5 4.1 4.7 6.7 6.5 2.6 1.8 5.5 3.2 8.6 4.4.7.2.4 1.3-.3 1.2-6.7-1.4-13.1-4.7-17.5-10.2-6.8-8.2-8.2-21.9-.1-29.9 1.8-1.6 4.3-2.8 6.8-2.8.8 0 2-.2 2.8 0 4.2.2 8.2 2.3 10.8 5.6 2.3 2.8 3.6 6.2 4 9.6 0 .6-.9.8-1.1.2Z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="306" height="343" fill="none" style="z-index: 3; position: absolute; pointer-events: none;"><path fill="#fff" d="M249.8 292.6c-1.9-14.8-10.3-39.7-15.4-46.4-5.6-7.3-7.9-9.6-26.6-15.9-1-5-4.7-17.6-9.1-22.9-6.7-10.1-25-12.4-30.5-11.2 0 0-29.6-10.4-63.7-10.4-10.8 2.4-23.3 7.3-30.1 17.6-4.6 6.8.6 9-1.7 15.2-.6 1.6-14.6 9.6-20.3 14.4-2.6 2.1-5.5 7.4-7.5 14.3-4 14.1.3 33.6-4.7 50.6-9.6 32.8-29.1 42.6-29.1 42.6h258.4c-.2-.1-15.6-16.7-19.7-47.9Z"></path><path fill="#000" d="M248.3 292.8c-2-13.1-6-26.1-11.1-38.3-2.5-5.9-6.3-11.6-11.6-15.1-2.7-1.7-5.7-3-8.8-4.3-3.1-1.2-6.3-2.3-9.4-3.4-.5-.2-.9-.6-1-1.1-.4-2-.9-3.9-1.5-5.9-2.6-8.1-5.4-17.1-13-21.8-5.8-3.5-12.7-5.2-19.4-5.5-1.3 0-2.7 0-3.9.2h-.4c-.1 0-.3 0-.4-.1-4.8-2.3-10.1-3.7-15.3-5.1-15.6-3.6-31.9-5.1-47.9-5.2-9.8 2.3-23.5 7.7-29.5 17.7-1 1.6-1.5 3.2-1.3 5 .2 2 .9 4.2.4 6.3-.2.9-.4 1.9-.8 2.7-.8 1.1-2.1 1.8-3.1 2.5-5.2 3.4-10.5 6.4-15.5 9.9-1.7 1.2-3.3 2.3-4.5 4-3.5 5-5.6 11-6.5 17-1.6 12.2 0 24.6-1.6 36.8-1.8 12.2-6.5 24-13.1 34.4-4.6 7-10.2 13.5-17.3 18l-.7-2.8h258.4l-1.1 2.5c-3-3.4-5.4-7.1-7.6-11-6.8-11.4-10.8-24.3-12.5-37.4Zm3-.4c1.1 8.5 3.2 16.9 6.4 24.9 3.2 7.9 7.2 15.6 12.8 22.1.8.9.1 2.6-1.1 2.5H11c-.8 0-1.5-.7-1.5-1.5 0-.6.3-1.1.8-1.3 1.6-.9 3.2-2.2 4.7-3.5 13.1-11.8 21.3-29.3 24-46.7 2.3-16.3-2-33.9 5.3-49.4 1.7-3.6 3.8-7.4 7.2-9.7 6.2-4.6 13-8 19.1-12.5.1 0 .1-.1.1-.1-.1.1-.2.3-.2.4.6-1.4.8-2.6.6-4.2-.3-2-.8-4.7-.1-6.8.3-1.2.9-2.3 1.5-3.2 7.2-10.8 19.9-15.6 32-18.3 3.4.1 6.9-.5 10.3-.5 4.7 0 9.5.7 14.2 1.3 13.5 2.1 26.5 5.7 39.8 8.6l-.9-.1c3.1-.6 6-.3 9 .1 19.2 2.9 25.7 11.3 30.9 29.2.6 2 1.1 4 1.6 6.1l-1-1.2c9.6 3.4 20.4 6.5 26.5 15.4 2.2 2.7 3.8 5.9 5.2 9.1 5.1 12.8 9.1 25.7 11.2 39.3Z"></path><path fill="#000" d="M92.2 226.8c7.4 15.8 18.9 29.2 32.6 39.8.5.4 0 1.2-.6.9-12.2-5.8-22.5-15.7-28.6-27.7-2-4-3.7-8.3-4.3-12.8-.2-.5.6-.7.9-.2ZM209.3 230.1c.3 16.7-6.5 33.8-19.5 44.6-.3.3-.7.2-1-.1-.3-.3-.2-.7.1-1 2.9-2.8 5.8-5.7 8-9.1 4.6-6.6 7.4-14.4 8.7-22.3.6-3.9 1-8.1.7-12-.1-1.9 2.9-2.1 3-.1ZM150.4 269.8c-2.3 8.1-4.2 16.9-3.1 25.3.3 1.9-2.6 2.4-3 .4-.5-4.6.1-9.1.9-13.5.9-4.4 2-8.6 3.5-12.8.4-1 2.1-.5 1.7.6ZM182.2 268.3c3.3 7.1 5.6 14.5 7.4 22 .2.8-.3 1.6-1.1 1.8-.8.2-1.6-.3-1.8-1.1-1-5.6-2.3-11.2-4.1-16.7-.6-1.8-1.2-3.6-1.9-5.4-.4-.9 1-1.6 1.5-.6Z"></path><path fill="#000" d="M74.8 218.2c3.7 20.2 17.9 37.3 35 48.2 5.8 3.7 12 6.9 18.4 9.5.4.2.6.6.4 1-.1.4-.6.6-.9.4-6.6-2.4-13-5.4-19-9-12.2-7.2-22.9-17.2-30.1-29.4-3.7-6.3-6.6-12.9-8-20.1-.2-1.2.6-2.3 1.8-2.5 1.1-.3 2.3.6 2.4 1.9ZM144.4 297.3c-2.8-.3-4.8-2.9-4.2-5.7l1.1-5.3c.4-2.1 2.4-3.6 4.5-3.3 2.1.2 3.8 2 3.8 4.2v5.4c.1 2.8-2.3 5-5.2 4.7ZM190.5 293.6c-2.7 1-5.6-.6-6.3-3.4l-1.3-5.3c-.5-2.1.6-4.2 2.7-5 2-.7 4.3.2 5.2 2.1l2.4 4.9c1.2 2.7 0 5.8-2.7 6.7Z"></path><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="5.126" d="M60.2 340.4s-.9-22.3-3.9-28.3M236.7 290.6s5.6 31.4 3.4 49.8M220.6 320.8s-14.8 2.2-27.8 1.6"></path><path fill="#000" d="M106.1 214.6c-1.4-4-2-8.1-1.7-12.3 0-.4.3-.6.7-.6.3 0 .6.3.6.6.3 3.8 1.4 7.7 3.2 11 .9 2-2.1 3.3-2.8 1.3ZM173.7 219.9c-2.8-6.3-9.7-9.5-15.8-11.7-3.8-1.2-8-2.1-12-2.7-9.7-1.5-23.4-3.8-33.1-4.8-.1 0-.1-.2 0-.2 2.8-.3 5.6-.3 8.4-.3 8.4.2 16.8 1.1 25.1 2.4 8.3 1.3 17.2 3.8 23.5 9.8 2 2.1 3.8 4.5 4.3 7.4.1.3-.3.4-.4.1Z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 306 306" fill="none" style="z-index: 9; position: absolute; pointer-events: none;"></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 306 306" fill="none" style="z-index: 8; position: absolute; pointer-events: none;"></svg>
</div>
			<span style="color:black">Find Me Here</span>
		`;
		new mapboxgl.default.Marker(devMarker)
			.setLngLat(hcmcCoords)
			.addTo(map);

			let quakeID = null;

			map.on('mousemove', 'earthquakes-viz', (event) => {
				map.getCanvas().style.cursor = 'pointer';
				if (event.features.length === 0) return;
				const quakeMagnitude = event.features[0].properties.mag;
				const quakeLocation = event.features[0].properties.place;
				const quakeDate = new Date(event.features[0].properties.time);

				magDisplay.textContent = quakeMagnitude;
				locDisplay.textContent = quakeLocation;
				dateDisplay.textContent = quakeDate;

				if (quakeID) {
					map.removeFeatureState({
						source: 'earthquakes',
						id: quakeID
					});
				}
				quakeID = event.features[0].id;
				map.setFeatureState({
					source: 'earthquakes',
					id: quakeID
				}, { hover: true });
			});

			map.on('mouseleave', 'earthquakes-viz', () => {
				if (quakeID) {
					map.setFeatureState({
						source: 'earthquakes',
						id: quakeID
					}, { hover: false });
				}
				quakeID = null;
				magDisplay.textContent = '';
				locDisplay.textContent = '';
				dateDisplay.textContent = '';
				map.getCanvas().style.cursor = '';
			});
		});
	});
</script>

<Metadata
	title="Articles | HieuNguyen"
	description="Discover the latest articles, delve into the world of technology, and explore the latest trends in the tech industry. Stay up-to-date with the latest news, and immerse yourself in the world of technology."
/>

<h1 class="sr-only">Wisnu Wicaksono's Articles</h1>

	<div style="position: relative; width: 100vw; height: 100vh;">
		<div id="map" style="width: 100vw; height: 100vh; position: absolute; top: 0; left: 0; z-index: 0;"></div>
		<!-- <div style="position: absolute; top: 24px; left: 24px; z-index: 1; background: rgba(255,255,255,0.9); border-radius: 8px; padding: 16px; min-width: 220px; box-shadow: 0 2px 8px rgba(0,0,0,0.12);">
			<h2 style="margin: 0 0 8px 0; font-size: 1.1rem;">Earthquake Info</h2>
			<div><strong>Magnitude:</strong> <span id="mag"></span></div>
			<div><strong>Location:</strong> <span id="loc"></span></div>
			<div><strong>Date:</strong> <span id="date"></span></div>
		</div> -->
	</div>

	<!-- Mapbox GL JS CSS -->
	<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" />
	